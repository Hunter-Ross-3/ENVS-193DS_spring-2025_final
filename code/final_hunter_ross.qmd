---
title: "final_hunter_ross"
format: html
---

https://github.com/Hunter-Ross-3/ENVS-193DS_spring-2025_final

```{r - packages}
#| message: false
#loading packages

library(tidyverse)
library(janitor)
library(here)
library(flextable)
library(readxl)

# read in data
sst <- read.csv(here("data/SST_update2023.csv"))
```

# Problem 1: Research writing 

### a. Transparent statistical methods

In part 1 the researchers used a correlation test because they are looking at the relationship between two continuous variables. In part 2 the researches used a ANOVA test because they are comparing different means. 

### b. More information needed

Another test my coworker could run in a linear regression analysis. This test would give the rate of change in nitrogen load from the headwaters to downstream. Also my coworker could include more of the details in their description. For example we are told the p-vales but not the sample size, standard deviation, or mean all of which would give up a better understanding of the results.  

### c. Suggestions for rewriting

Nitrogen load increases with distance from the headwaters, suggesting downstream accumulation from runoff. It also differed by source type, indicating that multiple sources contribute more than others. TO better interpret these patterns, we need better summary statistics. (Linear regression: slope = [slope], r² = [r²], p = 0.03, α = 0.05; ANOVA: F = [F], df = [df], p = 0.02, α = 0.05; descriptive stats not yet reported)

# Problem 2. Data Visualization

### a. Cleaning and summarizing

```{r - cleaning data}

sst_clean <- sst |> 
  #convert 'date' column to Date type
  mutate(date = ymd(date)) |> 
   #extract yr and month
   mutate(
     year = year(date), 
     month = month(date)
   ) |> 
  #group by year and month
  group_by(year, month) |> 
  #calculate mean temp
  summarise(mean_temp = mean(temp, na.rm = TRUE), .groups = "drop") 
  
#show 5 random rows
sst_clean |> 
  slice_sample(n= 5)

#show output
str(sst_clean)

```


### b. Data visualization

```{r - visualization}

#filter to only have years 2018 to 2023
sst_filtered <- sst_clean |> 
  filter(year >= 2018, year <=2023)

#create plot
ggplot(sst_filtered, aes(x = month, y = mean_temp, group = year, color = year)) +
  geom_line() +# Add line for year
  geom_point() +# Add point  for each month
  scale_x_continuous(breaks = 1:12, labels = month.abb) +  # Month labels
  scale_color_gradient(
    low = "lightgreen", 
    high = "darkgreen", 
    name = "Year"
  ) +
  labs(
    x = "Month",
    y = "Mean Temperature (°C)",
    title = "Monthly Mean SST by Site (2018–2023)"
  ) +
  theme_minimal() +
  theme(
    panel.border = element_rect(color = "black", fill = NA), 
    panel.background = element_rect(fill = "white")
  )

```


# Problem 3. Data analysis

### a. Response variable

```{r}
nest_boxes <- read.csv(here("data/occdist.csv"))
```
The 1 means that the bird was present a 0 means that the bird was not present. 

### b. Purpose of study

Swift Parrots are a threatened species of conservation concern, while Common Starlings and Tree Martins are not. This study researches how environmental factors like proximity to forest edge and seasonal variation influence Swift Parrot nesting behavior, in contrast to the more common or invasive species. 

### c. Difference in "seasons"

The two seasons are 2016 and 2017. these differ in environmental conditions or management actions, which may affect Swift Parrot occupancy patterns. 

### d. Table of models

```{r}
# Create a data frame listing the models
model_table <- tibble::tibble(
  Model_Number = 1:4,
  Includes_Season = c("No", "Yes", "Yes", "No"),
  Includes_EdgeDistance = c("No", "Yes", "No", "Yes"),
  Model_Description = c(
    "Null model (intercept only)",
    "Saturated model (season + edge distance + interaction)",
    "Model with season only",
    "Model with edge distance only"
  )
)

# Display the table
print(model_table)
```

### e. Run the models



### f. Check the diagnostics



### g. Select the best model



### h. Visualize the model predictions



### i. Write a caption for figure



### j. Calculate model predictions



### k. Interpret results



# Problem 4. Affective and exploratory visualizations

### a. Comparing visualizations



### b. Sharing your affective visualization




















